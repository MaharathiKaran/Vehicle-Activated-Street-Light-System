;====================================================================
; Main.asm file generated by New Project wizard
;
; Created:   Thu Nov 14 2024
; Processor: 80C52
; Compiler:  ASEM-51 (Proteus)
;====================================================================

$NOMOD51
$INCLUDE (80C52.MCU)



; Initialize Ports
START:
    MOV P1, #00H    ; Set all pins of Port 1 to low (0), no IR sensors detected
    MOV P0, #00H    ; Set all pins of Port 2 to low (0), all LEDs off initially

MAIN_LOOP:
    ; Check if IR sensor on P1.0 is high (vehicle detected)
    JB P1.0, SET_P2_0    ; If P1.0 is high, jump to SET_P2_0 to turn on LED 1
    CLR P2.0             ; If P1.0 is low, keep LED 1 off (P2.0 = 0)

    ; Check if IR sensor on P1.1 is high (vehicle detected)
    JB P1.1, SET_P2_1    ; If P1.1 is high, jump to SET_P2_1 to turn on LED 2
    CLR P2.1             ; If P1.1 is low, keep LED 2 off (P2.1 = 0)

    ; Check if IR sensor on P1.2 is high (vehicle detected)
    JB P1.2, SET_P2_2    ; If P1.2 is high, jump to SET_P2_2 to turn on LED 3
    CLR P2.2             ; If P1.2 is low, keep LED 3 off (P2.2 = 0)

    SJMP MAIN_LOOP       ; Repeat the loop to continuously check sensors

; Set LED 1 (connected to P2.0) if IR sensor on P1.0 is high
SET_P2_0:
    SETB P2.0     ; Turn on LED 1 (P2.0 = 1)
    JB P1.1, SET_P2_1;If P1.1 is high, jump to SET_P2_1 to turn on LED 2
    SJMP MAIN_LOOP       ; Go back to main loop

; Set LED 2 (connected to P2.1) if IR sensor on P1.1 is high
SET_P2_1:
    SETB P2.1            ; Turn on LED 2 (P2.1 = 1)
    JB P1.2, SET_P2_2 ; If P1.2 is high, jump to SET_P2_2 to turn on LED 3
    SJMP MAIN_LOOP       ; Go back to main loop

; Set LED 3 (connected to P2.2) if IR sensor on P1.2 is high
SET_P2_2:
    SETB P2.2            ; Turn on LED 3 (P2.2 = 1)
    SJMP MAIN_LOOP       ; Go back to main loop

END
